---
title : V3.6.2 Release Notes
layout : page
#permalink : /ReleaseNotes/v3.6.2
hero_height: is-hidden
---


# FEHM Version 3.6.2 - October 2024


## Summary

This release includes improved phase change algorithms, saved zone usage, and boundary conditions primarily related to new isothermal two-phase flow with dissolved gas. Also updated zone_saved capability.

Code enhancements are generally related to improvements in numerical performance for the AMANZI isothermal, 2-phase, noncondensible,  gas-water  physics with  gas solubility. Included are subroutine changes to accommodate restarts with the new AMANZI physics.

- Added variables for global gas and dissolved gas, added cnlof() for last times step dissolved gas

- Added tolerances for phase change, improved phase change (dissolved gas) algorithm

- Changed VG upper/lower cutoff parameters

- Added code to read and output isothermal multiphase solubility variables

- Added new subroutine geneq2_sol to generate equations for iso 2phase with sol

- Added use module com_prop_data (for future use)

- Added new subroutine inpress_solubility to read variables associated with isothermal two phase w solubility; added old mass fraction cnlof() set to cnlf()

- Modified code so initial liquid mass fraction is not read in ‘air’ keyword but in ‘pres’ keyword

- Added coding to set phase state(ieos) based on initial conditions (including iso 2phase w sol)

- Modified boundary condition (kq = -202), corrected but in solubility calculation

- Modified code so upper cutoff is passed through subroutine header

- Some code corrections for simulations related to VV Test cases and how output files are written.

- Documentation has been changed from sphinx to github pages for easier updates. Missing pages and sections have been fixed. fehmpytests descriptions and instructions have been added.


## FEHM Testing Improvements

fehmpytests is included in this repo and is recommended for developers as a fast, easy to use set of test cases to verify correctness of the code.
This does not replace the VV Test Suites used since the YMP QA program in 2003, but is easier to use and faster to run.  Most the test cases were constructed from the VV Test Suite and have the same input and output files.

The VV Test Suite is still used for checking analytical solutions and comprehensive multi-run models. It uses 2003 perl scripts and fortran programs to run and then compare results to analytical solutions. The perl scripts and programs may have problems running, but the test problems can still be run and results evaluated manually. The Windows version V3.4 of the VV Test Suite has been improved and is successful with this release. The Linux version 3.3 has not been updated but was uses for testing this release. Both VV Test Suites are available as assets with this release, see VERIFICATION_V3.4win_v3.6_clean.tar.gz and VERIFICATION_V3.3.0lnx_V3.6_clean.tar.gz

These 30 test cases were successful using fehmpytests:
avdonin baro_vel bodyforce cden cflxz colloid_filtration dryout dispersion evaporation fracture_aperture head heat2d heat2d_quad heat3d heat_pipe henrys_law mptr multi_solute perm_test potential_energy ramey richards salt_perm_poro sorption sptr_btc theis toronyi vapor_extraction wvtest rad_decay

These 84 Windows VV Test cases were successful for this release:
nts_thermal avdonin baro_trans baro_vel boun_test cellbased.init cellbased chain colloid_filtration colloid_ptrk colloid_mptr colloid_stream cden_test cflxz_test convection dissolution div_coarse div_fine doe dryout dual dual-k erosion_test evaporation forward reverse fracture_aperture fracture_transport gdpm head heat2d
 heat3d heat3d.finv 1D_convection heat2d_quad avdonin84 heat_gdkm_2D heat_pipe henrys_law infiltration infiltration_rlpm infiltration_gdkm multi_solute particle_capture perm_anisotropy perm_test potential_energy pruess_test ramey richards recycle_test_init recycle_test rh_test salt_test sorption binmode_flux binmode streamline sptr_btc tensor tensor_perm stress_2D stress_3D stress_3Dbeam stress_bodyforce stress_perm stress_restart theis toronyi transferf1 transferf2 transferf3 mptr_test transport3D.init transport3D vapor_extraction water_table lost_part wtrise_fehm wtrise_ini wtsi_test uz_test wvtest

For the Linux version V3.3 of the VV Test Suite, all tests were successful but perl scripts failed for some. These test had to be checked manually and compared to the Windows results: barometric, infiltration_gdkm, divergence, forward, particle_capture, uz_test

## Code Bugs Fixed

Issue #79 Fixed trac option to write specified time steps for trac. The option was being ignored and now works. See fehmpytests case dispersion for use of this option.

Issue #51 Windows to Linux issues fixed. When compiling code written on Windows, these are some common problems. Fortran line length too long, replace eq with eqv for logicals,  and replace windows call close(lu,dispose = 'delete') with close(lu). The Makefile.depends was updated to include all the new code and modules.


## Known Issues

Issue 69. See test transport3D. Linux and windows write different formats for the *.trc files. Linux v3.6 and old fehm v3.4 write 6 values in a single line. The newer Windows v3.6 writes 6 values in double lines. fehmpytests allows either format and will check 6 values even if they are on double lines. This will be addressed in later versions of FEHM.

Problems compiling FEHM with Intel Visual Fortran for debugging. Checking out the flag "Check Routine Interfaces" in the "Diagnostics" option of the Fortran workspace properties can let compilation of FEHM go through. 


## Code Changes

<pre>

</pre>
